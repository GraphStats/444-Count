<!DOCTYPE html>
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>444 Count</title>
  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/odometer.js/0.4.8/themes/odometer-theme-default.min.css" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@900&display=swap" rel="stylesheet">
  <meta name="description" content="444 Count - Real-time Instagram Followers Counter">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7562628849511682"
     crossorigin="anonymous"></script>
  <meta name="google-adsense-account" content="ca-pub-7562628849511682">
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-T4X83ZSG');</script>
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-QMLQLT7FTY"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
    gtag('config', 'G-QMLQLT7FTY');
  </script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/odometer.js/0.4.8/odometer.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<style>
  :root {
    --primary-color: #4361ee;
    --secondary-color: #3f37c9;
    --accent-color: #4cc9f0;
    --dark-color: #1a1a2e;
    --light-color: #f8f9fa;
    --success-color: #4caf50;
    --error-color: #f44336;
    --card-bg: rgba(255, 255, 255, 0.08);
    --card-border: rgba(255, 255, 255, 0.1);
    --text-primary: #ffffff;
    --text-secondary: #e0e0e0;
  }

  * {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
  }

  body {
    min-height: 100vh;
    font-family: 'Poppins', sans-serif;
    background: linear-gradient(135deg, var(--dark-color), #16213e);
    display: flex;
    flex-direction: column;
    align-items: center;
    color: var(--text-primary);
    overflow-x: hidden;
    position: relative;
    line-height: 1.6;
  }

  .container {
    width: 100%;
    max-width: 1200px;
    padding: 0 20px;
    margin: 0 auto;
  }

  /* Header */
  header {
    width: 100%;
    padding: 20px 0;
    display: flex;
    justify-content: space-between;
    align-items: center;
    position: relative;
    z-index: 100;
  }

  .logo {
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: transform 0.3s ease;
    text-decoration: none;
    color: var(--text-primary);
  }

  .logo img {
    width: 40px;
    height: 40px;
  }

  .logo-text {
    font-size: 1.5rem;
    font-weight: 700;
    background: linear-gradient(to right, var(--accent-color), var(--primary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .logo:hover {
    transform: scale(1.05);
  }

  /* Main content */
  .main-content {
    flex: 1;
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 40px 0;
    opacity: 0;
    transform: translateY(20px);
    transition: opacity 0.8s ease, transform 0.8s ease;
  }

  .main-content.visible {
    opacity: 1;
    transform: translateY(0);
  }

  .hero {
    text-align: center;
    margin-bottom: 40px;
    max-width: 800px;
  }

  .hero h1 {
    font-size: 2.5rem;
    margin-bottom: 15px;
    background: linear-gradient(to right, var(--accent-color), var(--primary-color));
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
  }

  .hero p {
    font-size: 1.1rem;
    color: var(--text-secondary);
    margin-bottom: 30px;
  }

  /* Search section */
  .search-section {
    width: 100%;
    max-width: 600px;
    margin: 0 auto 40px;
    position: relative;
  }

  .search-card {
    background: var(--card-bg);
    backdrop-filter: blur(15px);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: 30px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    transition: transform 0.3s ease, box-shadow 0.3s ease;
  }

  .search-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 40px rgba(0, 0, 0, 0.3);
  }

  .search-input {
    position: relative;
    margin-bottom: 20px;
  }

  .search-input input {
    width: 100%;
    padding: 15px 20px;
    font-size: 1rem;
    border-radius: 50px;
    border: none;
    outline: none;
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    font-family: 'Poppins', sans-serif;
    transition: all 0.3s ease;
    border: 1px solid transparent;
  }

  .search-input input:focus {
    border-color: var(--accent-color);
    background: rgba(255, 255, 255, 0.15);
  }

  .search-input input::placeholder {
    color: rgba(255, 255, 255, 0.6);
  }

  .search-button {
    width: 100%;
    padding: 15px;
    border: none;
    border-radius: 50px;
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
    font-weight: 600;
    font-size: 1rem;
    cursor: pointer;
    font-family: 'Poppins', sans-serif;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    gap: 8px;
  }

  .subscriber-count {
    font-family: 'Roboto', sans-serif;
    font-weight: 900;
    color: #fff;
    margin-top: 20px;
  }

  .search-button:hover {
    background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
  }

  /* Results section */
  .results-section {
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
  }

  .results-list {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
    gap: 20px;
    margin-top: 20px;
  }

  .channel-card {
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--card-border);
    border-radius: 12px;
    padding: 20px;
    color: var(--text-primary);
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 15px;
  }

  .channel-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
    border-color: var(--accent-color);
  }

  .channel-avatar {
    width: 50px;
    height: 50px;
    border-radius: 50%;
    object-fit: cover;
    border: 2px solid var(--accent-color);
  }

  .channel-info {
    flex: 1;
    overflow: hidden;
  }

  .channel-name {
    font-weight: 600;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
  }

  .channel-id {
    font-size: 0.8rem;
    color: var(--text-secondary);
    opacity: 0.8;
  }

  /* Counter section */
  .counter-section {
    display: none;
    width: 100%;
    max-width: 800px;
    margin: 0 auto;
    text-align: center;
    animation: fadeIn 0.5s ease-out;
  }

  .counter-card {
    background: var(--card-bg);
    backdrop-filter: blur(15px);
    border: 1px solid var(--card-border);
    border-radius: 16px;
    padding: 40px;
    box-shadow: 0 8px 32px rgba(0, 0, 0, 0.2);
    margin-bottom: 30px;
  }

  .counter-avatar {
    width: 120px;
    height: 120px;
    border-radius: 50%;
    object-fit: cover;
    border: 3px solid var(--accent-color);
    margin: 0 auto 20px;
    box-shadow: 0 5px 20px rgba(76, 201, 240, 0.3);
  }

  .counter-name {
    font-size: 1.8rem;
    font-weight: 600;
    margin-bottom: 10px;
    color: var(--text-primary);
  }

  .counter-label {
    font-size: 1rem;
    color: var(--text-secondary);
    margin-bottom: 20px;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .counter-value {
    font-size: 4rem;
    font-weight: 700;
    color: var(--accent-color);
    margin: 20px 0;
    font-family: 'Poppins', sans-serif;
  }

  /* Chart container */
  .chart-container {
    width: 100%;
    height: 200px;
    margin-top: 30px;
    position: relative;
  }

  /* Action buttons */
  .action-buttons {
    display: flex;
    gap: 15px;
    justify-content: center;
    margin-top: 30px;
    flex-wrap: wrap;
  }

  .action-button {
    padding: 12px 25px;
    border-radius: 50px;
    border: none;
    font-weight: 600;
    font-size: 0.9rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 8px;
    font-family: 'Poppins', sans-serif;
  }

  .primary-button {
    background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
    color: white;
  }

  .primary-button:hover {
    background: linear-gradient(135deg, var(--secondary-color), var(--primary-color));
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(67, 97, 238, 0.3);
  }

  .secondary-button {
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    border: 1px solid rgba(255, 255, 255, 0.2);
  }

  .secondary-button:hover {
    background: rgba(255, 255, 255, 0.2);
    transform: translateY(-2px);
  }

  .icon-button {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    background: rgba(255, 255, 255, 0.1);
    color: var(--text-primary);
    border: none;
    cursor: pointer;
    transition: all 0.3s ease;
  }

  .icon-button:hover {
    background: var(--primary-color);
    transform: translateY(-2px);
  }

  /* Loader */
  .loader {
    display: none;
    width: 50px;
    height: 50px;
    margin: 30px auto;
    position: relative;
  }

  .loader:before {
    content: "";
    width: 100%;
    height: 100%;
    border-radius: 50%;
    border: 5px solid transparent;
    border-top-color: var(--accent-color);
    border-bottom-color: var(--accent-color);
    position: absolute;
    top: 0;
    left: 0;
    animation: spin 1s linear infinite;
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* Share options */
  .share-menu {
    position: relative;
  }

  .share-options {
    display: none;
    position: absolute;
    bottom: 100%;
    right: 0;
    background: rgba(30, 30, 60, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 12px;
    padding: 10px;
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
    z-index: 100;
    min-width: 200px;
    animation: fadeInUp 0.3s ease-out;
  }

  .share-options.show {
    display: block;
  }

  .share-option {
    padding: 10px 15px;
    border-radius: 8px;
    display: flex;
    align-items: center;
    gap: 10px;
    cursor: pointer;
    transition: all 0.2s ease;
  }

  .share-option:hover {
    background: rgba(255, 255, 255, 0.1);
  }

  .share-option i {
    width: 20px;
    text-align: center;
  }

  /* Footer */
  footer {
    width: 100%;
    padding: 20px 0;
    text-align: center;
    color: var(--text-secondary);
    font-size: 0.9rem;
    margin-top: auto;
  }

  .footer-content {
    display: flex;
    justify-content: space-between;
    align-items: center;
    max-width: 1200px;
    margin: 0 auto;
    padding: 0 20px;
  }

  .footer-links {
    display: flex;
    gap: 20px;
  }

  .footer-link {
    color: var(--text-secondary);
    text-decoration: none;
    transition: color 0.3s ease;
  }

  .footer-link:hover {
    color: var(--accent-color);
  }

  /* Animations */
  @keyframes fadeIn {
    from { opacity: 0; transform: translateY(20px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes fadeInUp {
    from { opacity: 0; transform: translateY(10px); }
    to { opacity: 1; transform: translateY(0); }
  }

  /* Only count mode */
  .only-count .header,
  .only-count .hero,
  .only-count .search-section,
  .only-count .footer {
    display: none;
  }

  .only-count .counter-section {
    max-width: 100%;
    height: 100vh;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  .only-count .counter-card {
    background: transparent;
    backdrop-filter: none;
    border: none;
    box-shadow: none;
    padding: 0;
  }

  .only-count .counter-avatar {
    display: none;
  }

  .only-count .counter-name {
    display: none;
  }

  .only-count .counter-label {
    display: none;
  }

  .only-count .counter-value {
    font-size: 10rem;
    color: var(--text-primary);
  }

  .only-count .action-buttons {
    display: none;
  }

  /* Responsive */
  @media (max-width: 768px) {
    .hero h1 {
      font-size: 2rem;
    }

    .hero p {
      font-size: 1rem;
    }

    .search-card {
      padding: 20px;
    }

    .counter-card {
      padding: 30px 20px;
    }

    .counter-value {
      font-size: 3rem;
    }

    .action-buttons {
      flex-direction: column;
      gap: 10px;
    }

    .action-button {
      width: 100%;
      justify-content: center;
    }

    .only-count .counter-value {
      font-size: 6rem;
    }
  }

  @media (max-width: 480px) {
    .logo-text {
      font-size: 1.2rem;
    }

    .hero h1 {
      font-size: 1.8rem;
    }

    .results-list {
      grid-template-columns: 1fr;
    }

    .counter-value {
      font-size: 2.5rem;
    }

    .only-count .counter-value {
      font-size: 4rem;
    }
  }

  /* Ad container */
  .ad-container {
    width: 100%;
    margin: 30px 0;
    display: flex;
    justify-content: center;
  }

  /* Stats */
  .stats {
    display: flex;
    gap: 20px;
    margin-top: 20px;
    justify-content: center;
    flex-wrap: wrap;
  }

  .stat-item {
    display: flex;
    align-items: center;
    gap: 8px;
    color: var(--text-secondary);
    font-size: 0.9rem;
  }

  .stat-item i {
    color: var(--accent-color);
  }

  /* Toast notification */
  .toast {
    position: fixed;
    bottom: 20px;
    right: 20px;
    background: var(--card-bg);
    backdrop-filter: blur(10px);
    border: 1px solid var(--card-border);
    border-radius: 8px;
    padding: 15px 20px;
    color: var(--text-primary);
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.3);
    transform: translateY(100px);
    opacity: 0;
    transition: all 0.3s ease;
    z-index: 1000;
    display: flex;
    align-items: center;
    gap: 10px;
  }

  .toast.show {
    transform: translateY(0);
    opacity: 1;
  }

  .toast.success {
    border-left: 4px solid var(--success-color);
  }

  .toast.error {
    border-left: 4px solid var(--error-color);
  }

  .toast i {
    font-size: 1.2rem;
  }

  .toast.success i {
    color: var(--success-color);
  }

  .toast.error i {
    color: var(--error-color);
  }
</style>
<body>
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-T4X83ZSG"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>

  <div class="container">
    <header>
      <a href="/" class="logo">
        <span class="logo-text">444 Count</span>
      </a>
      <div class="stats">
        <div class="stat-item">
          <i class="fas fa-users"></i>
          <span id="visitor-count">...</span> visitors
        </div>
      </div>
    </header>
    <main class="main-content">
      <section class="hero">
        <h1>Real-time Instagram Followers Counter</h1>
        <p>Track Followers counts for any Instagram channel with live updates and beautiful analytics</p>
      </section>

      <section class="search-section">
        <div class="search-card">
          <div class="search-input">
            <input type="text" id="channel-input" placeholder="Enter Instagram channel name or URL" onkeypress="handleKeyPress(event)" />
          </div>
          <button class="search-button" onclick="fetchChannelData()">
            <i class="fas fa-search"></i> Search Channel
          </button>
        </div>
        <div class="loader" id="loader"></div>
      </section>

      <div class="ad-container">
        <ins class="adsbygoogle"
             style="display:block"
             data-ad-client="ca-pub-7562628849511682"
             data-ad-slot="2412018290"
             data-ad-format="auto"
             data-full-width-responsive="true"></ins>
      </div>
      <section class="results-section">
        <div id="result-list" class="results-list"></div>
      </section>
      <section class="counter-section" id="counter-container">
        <div class="counter-card">
          <img id="channel-avatar" class="counter-avatar" src="" alt="Channel Avatar">
          <h2 id="channel-name" class="counter-name"></h2>
          <div class="counter-label">Followers</div>
          <div id="subscriber-count" class="counter-value odometer">0</div>
          
          <!-- Chart container -->
          <div class="chart-container">
            <canvas id="subscriberChart"></canvas>
          </div>
          
          <div class="action-buttons">
            <div class="share-menu">
              <button class="action-button primary-button" onclick="toggleShareOptions()">
                <i class="fas fa-share-alt"></i> Share
              </button>
              <div class="share-options" id="share-options">
                <div class="share-option" onclick="shareOnTwitter()">
                  <i class="fab fa-twitter"></i> Twitter
                </div>
                <div class="share-option" onclick="shareOnFacebook()">
                  <i class="fab fa-facebook"></i> Facebook
                </div>
                <div class="share-option" onclick="copyLink()">
                  <i class="fas fa-link"></i> Copy Link
                </div>
              </div>
            </div>
            <button class="action-button secondary-button" onclick="activateOnlyCount()">
              <i class="fas fa-expand"></i> Fullscreen Mode
            </button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <footer>
      <div>V1.5.0 (BETA) | Powered by GraphStats</div>
  </footer>

  <script>
    let channelId;
    let intervalId;
    let odometer;
    let currentChannelData = null;
    let subscriberChart;
    let followerHistory = [];
    const maxHistoryPoints = 30; // Keep last 30 data points

    // Initialize main content animation
    document.addEventListener('DOMContentLoaded', () => {
      setTimeout(() => {
        document.querySelector('.main-content').classList.add('visible');
      }, 100);
      
      // Check for ad blocker
      setTimeout(checkAdBlocker, 1000);
      
      // Initialize chart
      initializeChart();
    });

    function initializeChart() {
      const ctx = document.getElementById('subscriberChart').getContext('2d');
      subscriberChart = new Chart(ctx, {
        type: 'line',
        data: {
          labels: [],
          datasets: [{
            label: 'Followers',
            data: [],
            borderColor: '#4cc9f0',
            backgroundColor: 'rgba(76, 201, 240, 0.1)',
            fill: true,
            tension: 0,
            pointRadius: 0,
            borderWidth: 2
          }]
        },
        options: {
          animation: false,
          responsive: true,
          maintainAspectRatio: false,
          plugins: {
            legend: {
              display: false
            },
            tooltip: {
              mode: 'index',
              intersect: false,
              callbacks: {
                label: function(context) {
                  return `Followers: ${context.parsed.y.toLocaleString()}`;
                }
              }
            }
          },
          scales: {
            x: {
              display: false,
              grid: {
                display: false
              }
            },
            y: {
              display: true,
              grid: {
                color: 'rgba(255, 255, 255, 0.1)',
                drawBorder: false
              },
              ticks: {
                color: 'rgba(255, 255, 255, 0.6)',
                callback: function(value) {
                  if (value >= 1000000) {
                    return (value / 1000000).toFixed(1) + 'M';
                  }
                  if (value >= 1000) {
                    return (value / 1000).toFixed(1) + 'K';
                  }
                  return value;
                }
              }
            }
          },
          interaction: {
            mode: 'nearest',
            axis: 'x',
            intersect: false
          }
        }
      });
    }

    function updateChart(count) {
      const now = new Date();
      const timeLabel = now.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
      
      // Add new data point
      followerHistory.push({
        count: count,
        time: timeLabel
      });
      
      // Limit history size
      if (followerHistory.length > maxHistoryPoints) {
        followerHistory.shift();
      }
      
      // Update chart data
      subscriberChart.data.labels = followerHistory.map(point => point.time);
      subscriberChart.data.datasets[0].data = followerHistory.map(point => point.count);
      subscriberChart.update();
    }

    function handleKeyPress(event) {
      if (event.key === 'Enter') {
        fetchChannelData();
      }
    }

    function fetchChannelData() {
      const name = document.getElementById('channel-input').value.trim();
      if (!name) {
        showToast('Please enter a channel name.', 'error');
        return;
      }
      
      showLoader(true);
      clearResults();
      
      fetch(`https://mixerno.space/api/instagram-user-counter/search/${encodeURIComponent(name)}`)
        .then(res => {
          if (!res.ok) {
            throw new Error('Network response was not ok');
          }
          return res.json();
        })
        .then(list => {
          showLoader(false);
          if (!list.list || !list.list.length) {
            showToast('Channel not found. Please try a different name.', 'error');
            return;
          }
          displayChannelResults(list.list);
        })
        .catch(err => { 
          console.error('Fetch error:', err); 
          showLoader(false);
          showToast('Error fetching channel data. Please try again.', 'error');
        });
    }

    function displayChannelResults(channels) {
      const res = document.getElementById('result-list');
      res.innerHTML = '';
      
      if (!channels || !channels.length) {
        showToast('No channels found with that name.', 'error');
        return;
      }
      
      channels.forEach(([title, , id, avatar]) => {
        const el = document.createElement('div');
        el.className = 'channel-card';
        el.onclick = () => selectChannel(id, title, avatar);
        
        el.innerHTML = `
          <img src="${avatar || 'https://via.placeholder.com/50'}" alt="${title}" class="channel-avatar">
          <div class="channel-info">
            <div class="channel-name">${title}</div>
            <div class="channel-id">${id}</div>
          </div>
          <i class="fas fa-chevron-right"></i>
        `;
        
        res.appendChild(el);
      });
    }

    function selectChannel(id, title, avatar) {
      channelId = id;
      currentChannelData = { id, title, avatar };
      followerHistory = []; // Reset history when selecting new channel
      document.getElementById('result-list').innerHTML = '';
      document.getElementById('counter-container').style.display = 'block';
      document.getElementById('channel-name').textContent = title;
      if (avatar) {
        document.getElementById('channel-avatar').src = avatar;
      } else {
        document.getElementById('channel-avatar').src = 'https://via.placeholder.com/150';
      }
      document.getElementById('counter-container').scrollIntoView({ behavior: 'smooth' });
      window.history.pushState({}, '', `#${id}`);
      if (!odometer) {
        odometer = new Odometer({
          el: document.getElementById('subscriber-count'),
          value: 0,
          format: '(,ddd)',
          theme: 'minimal'
        });
      } else {
        odometer.update(0);
      }
      fetchStatsData();
      clearInterval(intervalId);
      intervalId = setInterval(fetchStatsData, 2000);
    }

    async function fetchStatsData() {
      if (!channelId) return;
      try {
        const response = await fetch(`https://mixerno.space/api/instagram-user-counter/user/${channelId}`);
        if (!response.ok) {
          throw new Error('Network response was not ok');
        }
        const data = await response.json();
        if (data && data.counts) {
          const followersCount = data.counts.find(count => count.value === "followers")?.count;
          if (followersCount !== undefined) {
            updateCounter(followersCount);
            updateChart(followersCount);
            setDocumentTitle(followersCount);
            if (data.avatar && !currentChannelData.avatar) {
              currentChannelData.avatar = data.avatar;
              document.getElementById('channel-avatar').src = data.avatar;
            }
          }
        }
      } catch (error) {
        console.error("Error fetching stats data:", error);
      }
    }

    function updateCounter(count) {
      if (odometer) {
        odometer.update(count);
      } else {
        document.getElementById('subscriber-count').textContent = count.toLocaleString();
      }
    }

    function showLoader(show) {
      document.getElementById('loader').style.display = show ? 'block' : 'none';
    }

    function clearResults() {
      document.getElementById('result-list').innerHTML = '';
    }

    function showToast(message, type) {
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.innerHTML = `
        <i class="fas ${type === 'success' ? 'fa-check-circle' : 'fa-exclamation-circle'}"></i>
        <span>${message}</span>
      `;
      
      document.body.appendChild(toast);
      
      setTimeout(() => {
        toast.classList.add('show');
      }, 10);
      
      setTimeout(() => {
        toast.classList.remove('show');
        setTimeout(() => {
          document.body.removeChild(toast);
        }, 300);
      }, 3000);
    }

    function activateOnlyCount() {
      document.body.classList.add('only-count');
      const url = new URL(window.location.href);
      url.searchParams.set('only-count', 'true');
      window.history.pushState({}, '', url);
    }

    function toggleShareOptions() {
      const opts = document.getElementById('share-options');
      opts.classList.toggle('show');
      
      // Close when clicking outside
      if (opts.classList.contains('show')) {
        setTimeout(() => {
          document.addEventListener('click', closeShareOptions);
        }, 10);
      }
    }

    function closeShareOptions(e) {
      const opts = document.getElementById('share-options');
      if (!opts.contains(e.target) && !e.target.closest('.share-menu')) {
        opts.classList.remove('show');
        document.removeEventListener('click', closeShareOptions);
      }
    }

    function shareOnTwitter() {
      const name = document.getElementById('channel-name').textContent;
      const count = document.getElementById('subscriber-count').textContent;
      window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(`Check out ${name}'s follower count: ${count} on @444 Count!`)}&url=${encodeURIComponent(window.location.href)}`, '_blank');
      toggleShareOptions();
    }

    function shareOnFacebook() {
      window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(window.location.href)}`, '_blank');
      toggleShareOptions();
    }

    function copyLink() {
      navigator.clipboard.writeText(window.location.href)
        .then(() => {
          showToast('Link copied to clipboard!', 'success');
          toggleShareOptions();
        })
        .catch(err => {
          console.error('Failed to copy:', err);
          showToast('Failed to copy link. Please try again.', 'error');
        });
    }

    // On load, check for hash and only-count mode
    window.addEventListener('load', () => {
      const hash = window.location.hash.slice(1);
      if (hash) {
        // Use a default title and empty avatar
        selectChannel(hash, hash, "");
        document.getElementById('channel-input').value = hash;
        if (new URL(window.location.href).searchParams.get('only-count') === 'true') {
          activateOnlyCount();
        }
      }
      
      updateVisitorCount();
      setInterval(updateVisitorCount, 10000);

      // Initialize ads
      (adsbygoogle = window.adsbygoogle || []).push({});
    });

    function updateVisitorCount() {
      // Simulate visitor count update
      const visitors = Math.floor(Math.random() * 1) + 2;
      document.getElementById('visitor-count').textContent = visitors.toLocaleString();
    }
    
    window.addEventListener('popstate', () => {
      const hash = window.location.hash.slice(1);
      if (hash) {
        selectChannel(hash, hash, "");
      } else {
        document.getElementById('counter-container').style.display = 'none';
        clearInterval(intervalId);
        document.title = '444 Count';
      }
    });

    function setDocumentTitle(count) {
      document.title = `${currentChannelData.title} | ${count.toLocaleString()} Followers - 444 Count`;
    }

    function checkAdBlocker() {
      const adElement = document.querySelector('.adsbygoogle');
      if (!adElement || adElement.offsetHeight === 0) {
        showToast('Please consider disabling your ad blocker to support our service.', 'error');
      }
    }

    // Initialize ads
    (adsbygoogle = window.adsbygoogle || []).push({});

    // Initialize Odometer
    if (document.getElementById('subscriber-count')) {
      odometer = new Odometer({
        el: document.getElementById('subscriber-count'),
        value: 0,
        format: '(,ddd)',
        theme: 'default'
      });
    }
  </script>
</body>
</html>